# React-based Goods Trade System

## 流程图示

基本思路：设计并编写出一套能够实现完整交易流程的P2P二手交易系统，在尽量精细化用户端细节功能的同时，也加入管理端的权限调配来与用户端产生作用影响

![](https://github.com/toubun24/NiHon-IT-Training-Plan/blob/main/imgStorage/GTS202401241825.png)

参考"闲鱼"，对用户交易流程做了简单流程图示。同时，可以将该网站的使用角色分为：
* 用户：同时具有客户和商户的特性，可发布或购买商品
* 管理员：对用户的商品发布进行内容审核，且在退货申诉时做出判断，还可视情况限制用户的发布或购买权限甚至封号；管理员只对特定板块的内容有权限
* 超级管理员：除了普通管理员具有的权限外，还可以新建板块栏目，以及赋予管理员特定板块的权限

## 项目目标需求分析
基于前述业务流程分析，对于拟搭建平台所需实现功能的初步构想如下：
* **用户注册功能**：新注册用户需注意重名校验问题
* **用户管理功能**：管理员负责商品发布审核与申诉处理
* **主页展示功能**：用户展示主页信息，方便其他用户快速了解与评估
* **商品管理功能**：用户可以发布与修改商品详情，且能被其他用户通过板块tag或关键字搜索到；下单后卖家可根据先前洽谈好的价格对订单进行改价后买家再进行付款
* **权限管理功能**：管理员可以限制用户发布或购买权限或顶格直接封号，其相关的内容也将被限制访问
* **订单评价功能**：交易完成后，买家可对交易进行评价，且该评价也会展示到对应的卖家的主页信息中；超过一定时间不进行评价则会转化为默认满分好评
* **退货申诉功能**：买家在订单完成确认时可以发起申诉，首先由商家进行处理，商家拒绝退货时需写明原因并移交管理员处理
* **板块分类功能**：用户可以从多个板块中只选择自己感兴趣的板块进行加载
* **交易快照功能**：交易双方可以从交易订单中链接到下单时的商品描述页面（无视卖家后续的修改）

## 项目实现
基于前述项目目标分析，计划制作3个页面，包括注册登录页面（用户可注册，管理员账号无法新注册），用户页面和管理员页面，具体顶部栏与侧边栏分配如下
* 注册登录页面
* 用户页面
  * 推荐搜索页
  * 发布商品页
  * 个人主页
    * 已发布
      * 发布中
      * 草稿箱
      * 已下架
    * 已卖出
      * 全部
      * 待付款
      * 待发货
      * 待收货
      * 待评价
      * 退款中
    * 已买到
      * 全部
      * 待付款
      * 待发货
      * 待收货
      * 待评价
      * 退款中
* 管理员页面
  * 用户管理
    * 用户权限
    * 发布审核
  * 申诉管理
    * 待处理
    * 已完成
  * 超级管理
    * 板块管理*： 超级管理员可对板块tag进行设置

## 数据创建
基于前述分析的需求构建虚拟json server数据，并借助MySQL Benchmark绘制ER数据库实体关系图：
![](https://github.com/toubun24/NiHon-IT-Training-Plan/blob/main/imgStorage/EDM202401250229.jpg)

**界面权限rights**
展示界面中的功能项，主要是区分用户可以看到的界面（如交易相关）和管理员需要用到的界面（如用户管理）
```
[
    {
        "id":int,
        "title":"标签名称",//导航标签名称
        "key":"/路径",//路由路径
        "visible":0/1,//是否有权限，0没有，1有；为方便后续使用采用0/1值而不采用boolean值，下同
        "childrenId":int,//界面标签子选项的id
    },
    {
        ...
    },
]
```

**界面子项children**
设计中不存在“子项的子项”，因此只需要写入基本的标签信息即可
```
[
    {
        "id":int,
        "title":"标签名称",//导航标签名称
        "key":"/路径",//路由路径
    },
    {
        ...
    },
]
```

**商品属性goods**
```
[
    {
        "id":int,
        "num":int,//商品在售数量（库存数量）
        "sellerId":int,//卖家的账号id
        "state":int,//商品链接状态，0草稿箱，1发布待审核，2已发布，3审核未通过，4修改待审核，5卖家已下架
        "isReject":int,//忘记这个是干什么的了orz之后遇到再说吧x
        "publishTime":int,//发布时间
        "title":string,//商品介绍标题
        "classId":int,//商品分类
        "introduction":string,//商品详情介绍
        "price":int,//商品价格
        "selledNum":int,//商品已售数量
        "scores":array,//商品评价分，包含了每条评价的分（不评价且超时则默认好评）
    },
    {
        ...
    },
]
```

**商品类别classes**
```
[
    {
        "id":int,
        "title":string,//商品类别名称
        "key":int,//忘记这个是干什么的了orz之后遇到再说吧x
    },
    {
        ...
    },
]
```

**用户属性users**
```
[
    {
        "id":int,
        "username":string,//用户名，禁止重名
        "state":int,//用户状态，0正常，1禁止购买，2禁止出售，3封禁中，4已注销
        "classesId":array,//用户能看到的界面标签（如被禁止出售后，就看不到出售相关的标签了）
        "password":string,//用户密码
    },
    {
        ...
    },
]
```

**交易订单trades**
```
[
    {
        "id":int,
        "buyerId":int,//买家id
        "sellerId":int,//卖家id
        "price":int,//交易价格
        "state":int,//订单进度，0已下单待付款，1已付款待发货，2待收货，3待评价，4退款中，5已取消
        "num":int,//交易商品数量
        "publishTime":int,//
    },
    {
        ...
    },
]
```

**管理员属性managers**
管理员为数据库预设，无法新建注册
```
[
    {
        "id":int,
        "classesId":array,//管理员能看到的界面标签
        "password":string,//管理员密码
        "isAdmin":int,//是否是超级管理员，0不是，1是
    },
    {
        ...
    },
]
```

**商品评论comments**
```
[
    {
        "id":int,
        "tradeId":int,//关联的交易订单id
        "score":int,//评论分数
        "content":string,//评论内容
        "publishTime":int,//发布时间
        "default":int,//是否为超时后产生的默认好评，0否，1是
    },
    {
        ...
    },
]
```

### 数据关系


### 角色分类


### 板块分类

