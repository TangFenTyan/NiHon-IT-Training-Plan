## 实现细节
* 在列出【发布中】商品的页面，需求是想要做到按发布时间从近到远从上到下排序，这样能第一眼先看到最近发布的商品。一开始的思路是得到`res.data`后用`sort`对其倒序，但终归差点意思；后来才想到以前课程里曾额外添加json查询条件来实现直接获得目标数据的方式，因此`http://localhost:5000/goods?sellerId=3&_sort=publishTime&_order=desc&state_ne=0&state_ne=4`得以实现
* 商品详情页中，如果是自己发布的商品，则仅显示修改按钮；他人发布的商品则显示购买或收藏按钮，且可对发布者进行关注操作

## 细节思考
* 组件随浏览器大小缩放的动态变化（实际中是否都需要用百分数形式的距离而不用绝对px距离来写）
* json server里embed和expand都需要对应的名称+Id形式来写数据库后才能找到对应关系，但如果举例某个goods里既有sellerId又有buyerId信息（虽然我这里只有sellerId，所以直接改成userId就行），那要关联到user的话。。
* `http://localhost:5000/goods/16?_expand=user`怎么才能不对`password`之类的属性进行查询，否则即使setData时不将该字段写进去，后端也会把含有`password`这种信息的内容发送过来；如果是MySQL之类的语句查询的话我有搜到相关的处理方式，用URL方式查询时的处理方式暂时没找到
    ```
    {
    "userId": 3,
    "state": 1,
    "publishTime": 1708516893580,
    "introduction": "123",
    "yuanjia": 0,
    "shoujia": "123",
    "dizhi": [
        "天津市",
        "市辖区",
        "和平区"
    ],
    "tupian": "036033a8cfd69253.jpg",
    "id": 16,
    "user": {
        "username": "toubun",
        "state": 0,
        "password": "123",
        "id": 3,
        "balance": 100
    }
    }
    ```
* 数组渲染之前一定要判空；图片渲染则给占位图
* 子对象渲染问题
* 上传头像部分（包括上传商品图片），如果上传错误格式的图片或再次上传其他图片，都会增加`filelist`，需优化
* 优化注册功能，现在可以提供默认地址与上传头像（均为非必填项）。前者会在发布商品时默认填充地址栏，后者则会替代原本的默认头像，并计划在后续的个人主页功能中提供修改头像功能
* 商品收藏功能，在`users`下建立了`starList`数组，用户信息会记录点过收藏的商品`id`，之后会在个人主页下的收藏夹中查看历史收藏商品；商品详情也会记录被哪些用户id收藏过，并统计总数展示；自己发布的商品相关的`收藏`等按钮设为`disabled`状态
* 用户关注功能，在`users`下建立了`followList`数组，记录关注中的其他用户；自己头像后方的`关注`按钮设为`disabled`状态
* 头像组件如果没有相关联的上传图片做头像，则会启用默认头像格式，具体形式为底色+用户名前缀；有图片则显示头像图片
* 商品图片`card`展示时，由于原图片尺寸不一，导致`card`高度也发生了浮动。采用`<img style={{maxHeight:"150px",objectFit:"cover"}}/>`实现自动居中裁切，且更进一步，未来可以考虑引入[antd-img-crop](https://www.npmjs.com/package/antd-img-crop)使得图片在`upload`时就进行裁切并存储后端

## 尚待实现
* 左上方返回按钮
* 修改页面取消按钮返回上一级
* 修改页面上传图片默认值
* modify-id 默认填充值