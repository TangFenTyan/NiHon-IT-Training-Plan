<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <script>
        // 合法性判断指标
        var uidok = false;
        var passwdok = false;
        var emailok = false;

        window.onload = function(){
            // 获取用户名并用正则表达式判断合法性
            var uidReg=new RegExp("^[a-zA-Z0-9]{6,14}$");
            document.getElementById("userid").onblur = function(){
                var uidvalue = document.getElementById("userid").value;
                var uidcheck = uidvalue != null && uidvalue != "";
                if(uidcheck && uidReg.test(uidvalue) == false){
                    document.getElementById("uiddiv").innerHTML = "<span style=\"font-size:12px; color:red\">用户名不合法，请重新输入</span>";
                    uidok = false;
                }else if(uidcheck && uidReg.test(uidvalue) == true){
                    document.getElementById("uiddiv").innerHTML = null;
                    uidok = true;
                }else{
                    document.getElementById("uiddiv").innerHTML = null;
                    uidok = false;
                }
            }
            // 确认密码一致性
            document.getElementById("passwd1").onblur = function(){
                var pwd1 = document.getElementById("passwd1").value;
                var pwd2 = document.getElementById("passwd2").value;
                var pwd1check = pwd1 != null && pwd1 != "";
                var pwd2check = pwd2 != null && pwd2 != "";
                if(pwd1check && pwd2check && pwd1 != pwd2){ // 两条密码均非空且不一致时则输出提示
                    document.getElementById("passwddiv").innerHTML = "<span style=\"font-size:12px; color:red\">密码不一致，请重新输入</span>";
                    passwdok = false;
                }else if(pwd1check && pwd2check && pwd1 == pwd2){
                    document.getElementById("passwddiv").innerHTML = null;
                    passwdok = true;
                }else{
                    document.getElementById("passwddiv").innerHTML = null;
                    passwdok = false;
                }
            }
            document.getElementById("passwd2").onblur = function(){
                var pwd1 = document.getElementById("passwd1").value;
                var pwd2 = document.getElementById("passwd2").value;
                var pwd1check = pwd1 != null && pwd1 != "";
                var pwd2check = pwd2 != null && pwd2 != "";
                if(pwd1check && pwd2check && pwd1 != pwd2){
                    document.getElementById("passwddiv").innerHTML = "<span style=\"font-size:12px; color:red\">密码不一致，请重新输入</span>";
                }else if(pwd1check && pwd2check && pwd1 == pwd2){
                    document.getElementById("passwddiv").innerHTML = null;
                    passwdok = true;
                }else{
                    document.getElementById("passwddiv").innerHTML = null;
                    passwdok = false;
                }
            }
            // 验证邮箱合法性
            var regExpEmail=new RegExp("^[a-z0-9A-Z]+[-|a-z0-9A-Z._]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$")
            document.getElementById("emailaddr").onblur = function(){
                var emailvalue = document.getElementById("emailaddr").value;
                var emailcheck = emailvalue != null && emailvalue != "";
                if(emailcheck && regExpEmail.test(emailvalue) == false){
                    document.getElementById("emaildiv").innerHTML = "<span style=\"font-size:12px; color:red\">邮箱格式不合法，请重新输入</span>";
                    emailok = false;
                }else if(emailcheck && regExpEmail.test(emailvalue) == true){
                    document.getElementById("emaildiv").innerHTML = null;
                    emailok = true;
                }else{
                    document.getElementById("emaildiv").innerHTML = null;
                    emailok = false;
                }
            }
            // 注册时所有选项合法性验证
            document.getElementById("submitdiv").onclick = function(){
                if(uidok && passwdok && emailok){
                    document.getElementById("return").innerHTML = "<span style=\"font-size:12px; color:blue\">提交成功！</span>";
                }else{
                    document.getElementById("return").innerHTML = "<span style=\"font-size:12px; color:red\">提交失败！</span>";
                }
            }
        }
    </script>

<hr width="450" align="left" color="gray"><br>

<table width="450" border="0">
    <!--用户名-->
    <tr>
        <td width="100">
            用&ensp;户&ensp;名
        </td>
        <td>
            <input type="text" id="userid" placeholder="请输入用户名" required>
        </td>
        <td>
            <div id="uiddiv"></div>
        </td>
    </tr>
    <!--密码-->
    <tr>
        <td>
            密&emsp;&emsp;码
        </td>
        <td>
            <input type="password" id="passwd1" placeholder="请输入密码" required>
        </td>
    </tr>
    <!--确认密码-->
    <tr>
        <td>
            确认密码
        </td>
        <td>
            <input type="password" id="passwd2" placeholder="再次确认密码" required>
        </td>
        <td>
            <div id="passwddiv"></div>
        </td>
    </tr>
    <!--邮箱-->
    <tr>
        <td>
            邮&emsp;&emsp;箱
        </td>
        <td>
            <input type="email" id="emailaddr" placeholder="请输入邮箱" required>
        </td>
        <td>
            <div id="emaildiv"></div>
        </td>
    </tr>
</table >
<input type="button" value="注册" id="submitdiv" width="100">
<div id="return"></div>

<br><hr width="450" align="left" color="gray"><br>

</body>
</html>